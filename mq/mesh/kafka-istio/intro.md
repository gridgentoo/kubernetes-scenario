
### OpenShift Service Mesh essentials — Control Plane

В это Сценарии мы рассмотрим подготовку и развертывание плоскости управления сеткой **OpenShift Service Mesh Control Plane**. Вы увидите различные параметры конфигурации, используемые при развертывании уровней управления **Service Mesh Control Planes**, в том числе то, как вы должны настроить его для **production environments** и как развернуть их в кластере OpenShift.

Я постараюсь включить немного больше информации, чем текущая официальная документация **OpenShift**, но в основном все содержимое этой статьи можно найти в официальной документации. Я добавлю несколько снимков экрана **screen captures** и конкретные примеры, которые могут быть вам полезны, а также мы проведем обзор того, что инсталлируется **Operator** и настраивает в вашем кластере.

### Отличается ли установка и использование **OpenShift Service Mesh** от исходной **upstream ISTIO**?

 **OpenShift Service Mesh**  использует **upstream ISTIO** в качестве основного компонента. Теперь вам может быть интересно, есть ли какие-либо настройки, которые отличают установку или использование. Что ж, есть различия в некоторых аспектах, если вы сравните **OpenShift Service Mesh** с исходным развертыванием *default ISTIO upstream** (здесь вы найдете более подробную информацию):

https://docs.openshift.com/container-platform/4.5/service_mesh/v1x/ossm-vs-community.html

- Установка: **Upstream ISTIO** может быть установлен несколькими способами, один из них - установка на основе **Operator**, что упрощает управление жизненным циклом **lifecycle management** развертывания ISTIO. Это режим, который OpenShift использует и для развертывания **Service Mesh**, но в **ISTIO upstream**  вы используете клиент **istioctl**, а в OpenShift вы будете использовать **Operator Lifecycle Manager** и **Operator Hub** для установки и управления оператором **operator**.

- **Multitenancy**: развертывание **Upstream ISTIO**  по умолчанию не являются **not multitenant**, хотя вы можете развернуть его, выполнив некоторые шаги, чтобы получить некоторую мягкую множественность **soft-multitenancy**. Напротив, когда вы развертываете **Service Mesh** в **OpenShift**, вы по умолчанию получите **multitenant** настройку ISTIO, как мы увидим ниже.

- **Sidecar injection**: установка **Upstream Istio** по умолчанию автоматически внедряет **injects** в **sidecar** в Поды внутри проектов, которые имеют **label**, но **OpenShift Service Mesh** требует, чтобы вы указали аннотацию. Это позволяет точно выбрать, какие службы будут включены в **Mesh**.

- **Istio RBAC**: **OpenShift Service Mesh** предоставляет все возможности **upstream RBAC**, но также расширяет возможность сопоставления заголовков запросов с помощью регулярного выражения, мы увидим это, когда начнем играть с функциями **OpenShift Service Mesh**.

- **SSL libraries**: **OpenShift Service Mesh** заменяет **BoringSSL** на **OpenSSL**

- **Network configuration**: **Red Hat OpenShift Service Mesh** включает подключаемый модуль **CNI plug-in**, который предоставляет вам альтернативный способ настройки конфигурирования Подов в сети Networking. Подключаемый модуль **CNI plug-in** Подключаемый модуль **init-container network** конфигурация, устраняющая необходимость предоставлять учетным записям служб **grant service** и проектам доступ к **Security Context Constraints (SCCs)**  с повышенными привилегиями. Использование этого подключаемого модуля **CNI plug-in** также имеет значение при настройке вторичных интерфейсов с **Multus** как мы увидим в разделе **“Data Plane”** этой серии сценариев.

- Не поддерживаемые функции (**OpenShift 4.5**): **OpenShift Service Mesh** не поддерживает службы на основе QUIC и использование функций Secret Discovery Service (SDS).Он также не поддерживает включение внешних элементов (например, виртуальных машин) в **Mesh network**.




